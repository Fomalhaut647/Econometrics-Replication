# 表格6 复现脚本

此目录包含一个 Python 脚本，用于复现 Card 和 Krueger (1994) 的论文《最低工资与就业：新泽西州和宾夕法尼亚州快餐业的案例研究》中的 **表格6：最低工资上涨对其他结果变量的影响**。

## 文件

-   `replicate.py` - 主要的复现脚本
-   `output.md` - 复现脚本生成的输出文件
-   `standard_output.md` - 标准参考输出文件（请勿修改）
-   `README.md` - 本说明文件

## 描述

脚本 `replicate.py` 分析了新泽西州最低工资上涨对就业以外的各种店铺经营结果的影响，包括：

-   **店铺特征**：全职员工比例、营业时长、收银机数量
-   **员工餐计划**：低价餐、免费餐、组合计划
-   **工资概况**：首次加薪所需时间、加薪幅度、工资增长斜率

分析包括：
1.  新泽西州和宾夕法尼亚州店铺的结果变量均值变化
2.  新泽西州和宾夕法尼亚州之间的差异 (NJ-PA)
3.  包含新泽西州虚拟变量的回归分析
4.  包含初始工资差距变量的回归分析
5.  控制了区域效应后，包含工资差距变量的回归分析

## 要求

### Python 版本
-   Python 3.6 或更高版本

### 必需库
```
pandas>=1.3.0
numpy>=1.20.0
statsmodels>=0.12.0
scipy>=1.7.0
```

### 安装
使用 pip 安装所需包：
```bash
pip install pandas numpy statsmodels scipy
```

或者如果您使用 conda：
```bash
conda install pandas numpy statsmodels scipy
```

## 使用方法

### 运行脚本
在 `table_6/` 目录下运行：
```bash
python replicate.py
```

或者从任何目录运行：
```bash
python table_6/replicate.py
```

### 预期输出
脚本会将 Markdown 格式的表格输出到标准输出 (stdout)，该表格与 `standard_output.md` 的内容高度匹配。输出包括：

1.  **表格标题**：均值变化和回归结果的列定义
2.  **店铺特征** (第1-4行)：经营变量的分析
3.  **员工餐计划** (第5-7行)：膳食福利计划的分析
4.  **工资概况** (第8-10行)：工资进展变量的分析
5.  **注释**：关于方法论和变量定义的详细说明

### 输出格式
-   数字按适当的小数位数格式化
-   标准误在括号中显示
-   缺失值得到妥善处理
-   列对齐与标准格式高度一致

## 数据来源

脚本从 `../data/public.dat` 文件读取数据，变量定义参照 `../data/codebook` 文件。该数据包含来自对新泽西州和宾夕法尼亚州快餐店进行的两轮调研的信息。

## 方法论

复现遵循 Card 和 Krueger (1994) 中描述的方法论：

1.  **样本选择**：在两轮调研中均有数据的店铺
2.  **变量构建**：
    -   全职等效就业（FTE），兼职员工权重为0.5
    -   工资差距，指达到5.05美元最低工资所需的比例增长
    -   基于调研代码的员工餐计划指标
    -   工资增长斜率，按每周百分比计算
3.  **统计分析**：
    -   列 (i)-(iii) 的简单均值和标准误
    -   列 (iv)-(vi) 使用普通最小二乘法 (OLS) 回归，并控制连锁店和所有权效应
    -   合适的标准误计算

## 技术说明

-   对于所有宾夕法尼亚州的店铺，工资差距变量为零。
-   回归模型包含连锁店虚拟变量（Burger King、KFC、Roy Rogers）和公司所有权指标。
-   列 (vi) 的模型额外包含新泽西州和宾夕法尼亚州地区的区域虚拟变量。
-   全职员工比例按占总全职等效就业（FTE）的百分比计算。
-   工资增长斜率使用正确的时间转换，按每周百分比计算。

## 复现质量

输出在以下方面与 `standard_output.md` 高度匹配：
-   大多数变量的数值和精度
-   标准误计算
-   表格结构和格式
-   注释和引文

**注意**：可能存在一些微小的数值差异，尤其是在员工餐计划方面，这可能是由于数据版本差异或原始论文中未详细说明的细微方法学差异造成的。

## 学术参考文献

Card, David, and Alan B. Krueger. "Minimum wages and employment: a case study of the fast-food industry in New Jersey and Pennsylvania." *American Economic Review* 84, no. 4 (1994): 772-793.
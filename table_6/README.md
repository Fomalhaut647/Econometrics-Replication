# 表格6：最低工资上涨对其他结果的影响

## 概述
此文件夹包含Card和Krueger (1994)表格6的复现脚本，该表格检验了最低工资上涨对快餐店各种非就业结果的影响。

## 文件
- `replicate.py`：复现表格计算的Python脚本
- `output.md`：从复现脚本生成的输出
- `standard_output.md`：用于比较的预期/参考输出
- `README.md`：本文件

## 输出与标准输出的差异

### 主要发现
复现结果（`output.md`）成功捕获了最低工资变化如何影响就业以外的各种餐厅特征的关键模式。

### 结果类别分析

#### 1. 店铺特征（第1-4行）
**全职员工比例：**
- 平均变化显示相似模式（新泽西州：2.64%，宾夕法尼亚州：-4.65%）
- 新泽西州-宾夕法尼亚州差异为7.29%得到一致估计
- 回归系数保持相同的数量级

**营业时间和设备：**
- 工作日营业时间显示最小变化
- 收银机数量在新泽西州显示小幅负变化，在宾夕法尼亚州显示正变化
- 结果表明运营调整有限

#### 2. 员工餐计划（第5-7行）
**餐计划变化：**
- 低价餐计划在两个州都有所减少
- 免费餐计划有所增加，特别是在新泽西州
- 组合计划显示混合模式
- 这些结果表明餐厅可能调整非工资福利

#### 3. 工资概况特征（第8-10行）
**职业发展模式：**
- 首次加薪时间在新泽西州比宾夕法尼亚州增加更多
- 加薪金额显示最小变化
- 工资概况斜率保持相对稳定

### 统计实现
复现成功实现了：
- 按州计算平均变化的正确计算
- 新泽西州-宾夕法尼亚州差异计算及正确标准误
- 三种不同的回归规范：
  - 新泽西州虚拟变量模型
  - 初始工资差距模型（基础）
  - 初始工资差距模型（带地区控制变量）

### 技术准确性
复现正确处理了：
- 不同结果变量的样本选择
- 餐计划变量的缺失数据处理
- 基于加薪时间和金额的工资斜率计算
- 差异的适当标准误计算

### 微小变化
小的数值差异可能由以下原因产生：
- 中间计算的舍入约定
- 样本选择标准实现
- 特定结果测量中缺失值的处理

## 经济学解释
结果显示最低工资上涨导致了：
1. **构成变化**：新泽西州全职员工比例更高
2. **有限的运营变化**：对时间或设备的影响最小
3. **福利调整**：员工餐计划的变化
4. **适度的职业阶梯效应**：晋升时间的轻微变化

## 结论
复现确认最低工资上涨对就业以外的影响，特别是对劳动力构成和员工福利的影响。输出与标准结果之间的一致性验证了这些发现的稳健性，并证明雇主调整了就业关系的多个维度以应对工资规定。

## 描述

脚本 `replicate.py` 分析了新泽西州最低工资上涨对就业以外的各种店铺经营结果的影响，包括：

-   **店铺特征**：全职员工比例、营业时长、收银机数量
-   **员工餐计划**：低价餐、免费餐、组合计划
-   **工资概况**：首次加薪所需时间、加薪幅度、工资增长斜率

分析包括：
1.  新泽西州和宾夕法尼亚州店铺的结果变量均值变化
2.  新泽西州和宾夕法尼亚州之间的差异 (NJ-PA)
3.  包含新泽西州虚拟变量的回归分析
4.  包含初始工资差距变量的回归分析
5.  控制了区域效应后，包含工资差距变量的回归分析

## 要求

### Python 版本
-   Python 3.6 或更高版本

### 必需库
```
pandas>=1.3.0
numpy>=1.20.0
statsmodels>=0.12.0
scipy>=1.7.0
```

### 安装
使用 pip 安装所需包：
```bash
pip install pandas numpy statsmodels scipy
```

或者如果您使用 conda：
```bash
conda install pandas numpy statsmodels scipy
```

## 使用方法

### 运行脚本
在 `table_6/` 目录下运行：
```bash
python replicate.py
```

或者从任何目录运行：
```bash
python table_6/replicate.py
```

### 预期输出
脚本会将 Markdown 格式的表格输出到标准输出 (stdout)，该表格与 `standard_output.md` 的内容高度匹配。输出包括：

1.  **表格标题**：均值变化和回归结果的列定义
2.  **店铺特征** (第1-4行)：经营变量的分析
3.  **员工餐计划** (第5-7行)：膳食福利计划的分析
4.  **工资概况** (第8-10行)：工资进展变量的分析
5.  **注释**：关于方法论和变量定义的详细说明

### 输出格式
-   数字按适当的小数位数格式化
-   标准误在括号中显示
-   缺失值得到妥善处理
-   列对齐与标准格式高度一致

## 数据来源

脚本从 `../data/public.dat` 文件读取数据，变量定义参照 `../data/codebook` 文件。该数据包含来自对新泽西州和宾夕法尼亚州快餐店进行的两轮调研的信息。

## 方法论

复现遵循 Card 和 Krueger (1994) 中描述的方法论：

1.  **样本选择**：在两轮调研中均有数据的店铺
2.  **变量构建**：
    -   全职等效就业（FTE），兼职员工权重为0.5
    -   工资差距，指达到5.05美元最低工资所需的比例增长
    -   基于调研代码的员工餐计划指标
    -   工资增长斜率，按每周百分比计算
3.  **统计分析**：
    -   列 (i)-(iii) 的简单均值和标准误
    -   列 (iv)-(vi) 使用普通最小二乘法 (OLS) 回归，并控制连锁店和所有权效应
    -   合适的标准误计算

## 技术说明

-   对于所有宾夕法尼亚州的店铺，工资差距变量为零。
-   回归模型包含连锁店虚拟变量（Burger King、KFC、Roy Rogers）和公司所有权指标。
-   列 (vi) 的模型额外包含新泽西州和宾夕法尼亚州地区的区域虚拟变量。
-   全职员工比例按占总全职等效就业（FTE）的百分比计算。
-   工资增长斜率使用正确的时间转换，按每周百分比计算。

## 复现质量

输出在以下方面与 `standard_output.md` 高度匹配：
-   大多数变量的数值和精度
-   标准误计算
-   表格结构和格式
-   注释和引文

**注意**：可能存在一些微小的数值差异，尤其是在员工餐计划方面，这可能是由于数据版本差异或原始论文中未详细说明的细微方法学差异造成的。

## 学术参考文献

Card, David, and Alan B. Krueger. "Minimum wages and employment: a case study of the fast-food industry in New Jersey and Pennsylvania." *American Economic Review* 84, no. 4 (1994): 772-793.